{
  "version": 3,
  "sources": ["../../pix-payload/dist/payload.class.js", "../../pix-payload/dist/index.js"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Payload {\n    constructor(data, PAYLOAD_FORMAT_INDICATOR = \"00\", MERCHANT_ACCOUNT_INFORMATION = \"26\", MERCHANT_ACCOUNT_INFORMATION_GUI = \"00\", MERCHANT_ACCOUNT_INFORMATION_KEY = \"01\", MERCHANT_CATEGORY_CODE = \"52\", TRANSACTION_CURRENCY = \"53\", TRANSACTION_AMOUNT = \"54\", COUNTRY_CODE = \"58\", MERCHANT_NAME = \"59\", MERCHANT_CITY = \"60\", ADDITIONAL_DATA_FIELD = \"62\", ADDITIONAL_DATA_FIELD_TXTID = \"05\", CRC16 = \"63\") {\n        this.data = data;\n        this.PAYLOAD_FORMAT_INDICATOR = PAYLOAD_FORMAT_INDICATOR;\n        this.MERCHANT_ACCOUNT_INFORMATION = MERCHANT_ACCOUNT_INFORMATION;\n        this.MERCHANT_ACCOUNT_INFORMATION_GUI = MERCHANT_ACCOUNT_INFORMATION_GUI;\n        this.MERCHANT_ACCOUNT_INFORMATION_KEY = MERCHANT_ACCOUNT_INFORMATION_KEY;\n        this.MERCHANT_CATEGORY_CODE = MERCHANT_CATEGORY_CODE;\n        this.TRANSACTION_CURRENCY = TRANSACTION_CURRENCY;\n        this.TRANSACTION_AMOUNT = TRANSACTION_AMOUNT;\n        this.COUNTRY_CODE = COUNTRY_CODE;\n        this.MERCHANT_NAME = MERCHANT_NAME;\n        this.MERCHANT_CITY = MERCHANT_CITY;\n        this.ADDITIONAL_DATA_FIELD = ADDITIONAL_DATA_FIELD;\n        this.ADDITIONAL_DATA_FIELD_TXTID = ADDITIONAL_DATA_FIELD_TXTID;\n        this.CRC16 = CRC16;\n    }\n    EVM(id, subject) {\n        if (subject.length > 99)\n            throw new Error(\"Content of EVM not over 99 chars!\");\n        return (this.padder(id) + this.padder(subject.length) + subject.toString());\n    }\n    calcCRC16CCITT(subject) {\n        let result = 0xffff;\n        if (subject.length > 0) {\n            for (let offset = 0; offset < subject.length; offset++) {\n                result ^= subject.charCodeAt(offset) << 8;\n                for (let bitwise = 0; bitwise < 8; bitwise++) {\n                    if ((result <<= 1) & 0x10000)\n                        result ^= 0x1021;\n                    result &= 0xffff;\n                }\n            }\n        }\n        return result.toString(16).toUpperCase();\n    }\n    padder(subject) {\n        return subject.toString().padStart(2, \"0\");\n    }\n    getPayloadFormatIndicator() {\n        return this.EVM(this.PAYLOAD_FORMAT_INDICATOR, \"01\");\n    }\n    getMerchantAccountInformation() {\n        if (!this.data.key)\n            throw new Error(\"Pix key is mandatory!\");\n        const GUI = this.EVM(this.MERCHANT_ACCOUNT_INFORMATION_GUI, \"BR.GOV.BCB.PIX\");\n        const KEY = this.EVM(this.MERCHANT_ACCOUNT_INFORMATION_KEY, this.data.key);\n        return this.EVM(this.MERCHANT_ACCOUNT_INFORMATION, `${GUI}${KEY}`);\n    }\n    getMerchantCategoryCode() {\n        return this.EVM(this.MERCHANT_CATEGORY_CODE, \"0000\");\n    }\n    getTransactionCurrency() {\n        return this.EVM(this.TRANSACTION_CURRENCY, \"986\");\n    }\n    getTransactionAmount() {\n        if (this.data.amount !== undefined) {\n            const value = Number(this.data.amount).toFixed(2).toString();\n            return this.EVM(this.TRANSACTION_AMOUNT, value);\n        }\n        return \"\";\n    }\n    getCountryCode() {\n        return this.EVM(this.COUNTRY_CODE, \"BR\");\n    }\n    getMerchantName() {\n        if (!this.data.name)\n            throw new Error(\"Name is mandatory!\");\n        return this.EVM(this.MERCHANT_NAME, this.data.name);\n    }\n    getMerchantCity() {\n        if (!this.data.city)\n            throw new Error(\"Citi is mandatory!\");\n        return this.EVM(this.MERCHANT_CITY, this.data.city);\n    }\n    getTransactionId() {\n        if (this.data.transactionId !== undefined) {\n            const transactionId = this.EVM(this.ADDITIONAL_DATA_FIELD_TXTID, this.data.transactionId);\n            return this.EVM(this.ADDITIONAL_DATA_FIELD, transactionId);\n        }\n        return \"\";\n    }\n    getCRC16(subject) {\n        const calculated = this.calcCRC16CCITT(`${subject}6304`);\n        return this.EVM(this.CRC16, calculated);\n    }\n    get() {\n        const payload = this.getPayloadFormatIndicator() +\n            this.getMerchantAccountInformation() +\n            this.getMerchantCategoryCode() +\n            this.getTransactionCurrency() +\n            this.getTransactionAmount() +\n            this.getCountryCode() +\n            this.getMerchantName() +\n            this.getMerchantCity() +\n            this.getTransactionId();\n        return `${payload}${this.getCRC16(payload)}`;\n    }\n}\nexports.default = Payload;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.payload = void 0;\nconst payload_class_1 = __importDefault(require(\"./payload.class\"));\nfunction payload(props) {\n    return new payload_class_1.default(props).get();\n}\nexports.payload = payload;\n"],
  "mappings": "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",
  "names": []
}
